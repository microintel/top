<html>

<head>
  <title>java top</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f8f9fa;
    }

    header {
      padding: 10px;
      background: black;
      color: white;
      text-align: center;
    }

    .topic-list {
      padding: 10px;
      background-color: #000;
    }

    .topic {
      background: black;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }

    .topic h3 {
      margin: 0;
      font-size: 16px;
      color: white;
    }

  
    .popup {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #000;
      display: none;
      flex-direction: column;
    }

    .popup-header {
      background: #000;
      color: #fff;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .popup-header h2 {
      margin: 0;
      font-size: 18px;
    }

    .popup-body {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      height: 300px;
    }

    .lang-buttons {
      margin: 10px 0;
    }

    .lang-buttons button {
      margin-right: 10px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .lang-buttons button.active {
      background: #007bff;
      color: white;
    }

    pre {
      background: #f1f1f1;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
    }

    a {
      color: #007bff;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
    }

    .nav-buttons button,
    .close {
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .close {
      background: red;
      color: white;
    }

    .back {
      background: #6c757d;
      color: white;
    }

    .forward {
      background: #28a745;
      color: white;
    }

    #popupBody pre {
      min-height: 30vh;
      max-height: 70vh;
    }
  </style>
</head>

<body>
  <header>
    <h2>Java Lang Topic</h2>
  </header>
  <div class="topic-list" id="topicList"></div>
  <div class="popup" id="popup">
    <div class="popup-header">
      <button class="close" id="closeBtn">X</button>
      <h2 id="popupTitle"></h2>
    </div>
    <div class="popup-body">
      <div class="lang-buttons" id="langButtons"></div>
      <div id="popupBody"></div>
      <div class="nav-buttons">
        <button class="back" id="prevBtn">← Previous</button>
        <button class="forward" id="nextBtn">Next →</button>
      </div>
    </div>
  </div>
  <script>
    let dataSets = {}; 
    let unifiedTopics = []; 
    let currentTopicIndex = 0;
    let currentLang = "Java";


    function normalize(str) {
      return str.toLowerCase()
        .replace(/java|c\+\+|c#|csharp|python|javascript|js|c/g, "")
        .replace(/[^a-z0-9]/g, "")
        .trim();
    }

    function findMatch(topic, dataset) {
      const normTopic = normalize(topic);
      let bestKey = "", bestScore = 0;
      Object.keys(dataset).forEach(key => {
        const normKey = normalize(key);
        let score = 0;
        if (normKey.includes(normTopic) || normTopic.includes(normKey)) {
          score = Math.min(normKey.length, normTopic.length);
        }
        if (score > bestScore) { bestScore = score; bestKey = key; }
      });
      return bestKey;
    }

    async function loadData() {

      const files = {

        "Java": "https://microintel.github.io/top/tops/java-top.json",
        "C": "https://microintel.github.io/top/tops/c-top.json"
        // "python": "https://microintel.github.io/top/tops/java-top.json",
      };

      for (const [lang, file] of Object.entries(files)) {
        const res = await fetch(file);
        dataSets[lang] = await res.json();
      }

 
      unifiedTopics = Object.keys(dataSets["Java"]);

      const list = document.getElementById("topicList");
      unifiedTopics.forEach((topic, idx) => {
        const div = document.createElement("div");
        div.className = "topic";
        div.innerHTML = `<h3> ${idx+1}. ${topic.charAt(0).toUpperCase() + topic.slice(1)}</h3>`;
        div.onclick = () => openPopup(idx);
        list.appendChild(div);
      });
    }

    function openPopup(index) {
      currentTopicIndex = index;
      renderPopup();
      document.getElementById("popup").style.display = "flex";
    }

    function renderPopup() {

      const topic = unifiedTopics[currentTopicIndex];
      document.getElementById("popupTitle").innerText = topic.charAt(0).toUpperCase() + topic.slice(1);

      
      const langButtonsDiv = document.getElementById("langButtons");
      langButtonsDiv.innerHTML = "";
      for (const lang in dataSets) {
        const btn = document.createElement("button");
        btn.innerText = lang;
        btn.classList.toggle("active", lang === currentLang);
        btn.onclick = () => { currentLang = lang; renderPopup(); };
        langButtonsDiv.appendChild(btn);
      }

      const body = document.getElementById("popupBody");
      const dataset = dataSets[currentLang];
      let bestKey = findMatch(topic, dataset);
      let content = dataset[bestKey];

      if (content) {
        body.innerHTML = `
          <pre>${content[0] || ""}</pre>  ${content[1] ? `<a href="${content[1]}" target="_blank">output</a>` : ""}
    `;
      } else {
        body.innerHTML = `<p style="color:red;">No ${currentLang} version found.</p>`;
      }
    }

    document.getElementById("prevBtn").onclick = () => {
      if (currentTopicIndex > 0) { currentTopicIndex--; renderPopup(); }
    };
    document.getElementById("nextBtn").onclick = () => {
      if (currentTopicIndex < unifiedTopics.length - 1) { currentTopicIndex++; renderPopup(); }
    };

    document.getElementById("closeBtn").onclick = () => { document.getElementById("popup").style.display = "none"; };

    loadData();
  </script>
</body>

</html>